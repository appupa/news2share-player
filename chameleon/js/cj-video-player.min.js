(function(b){function wb(){c.paused||E();switch(b(this).attr("class").split(" ")[0]){case "cj-vid-twitter":window.open("http://twitter.com/home?status="+K+parent.document.URL);break;case "cj-vid-facebook":window.open("http://www.facebook.com/share.php?u="+parent.document.URL);break;case "cj-vid-google":window.open("https://plus.google.com/share?url="+parent.document.URL)}}function xb(a){setTimeout(a,250)}function bb(a){l=b(c).addClass("cj-video");b("<source />").attr("type","video/webm").attr("src", a.split("mp4").join("webm")).prependTo(l);b("<source />").attr("type","video/ogg").attr("src",a.split("mp4").join("ogv")).prependTo(l);b("<source />").attr("type","video/mp4").attr("src",a).prependTo(l)}function Ha(){m&&m.unbind("error.cjvideo");bb(u);ha=b("<div />").addClass("cj-vid-controls").html(yb).appendTo(v);ia=parseInt(ha.css("height"),10)||29;l.prependTo(v.css("opacity",0).addClass("cj-fade-video"));0===w&&(w=1);Ia=w;Q=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame|| window.msRequestAnimationFrame||xb;c.addEventListener("canplay",cb,!1);c.play()}function zb(){m.unbind("load.cjvideo").remove();h=m=null;Ha()}function cb(){c.pause();c.removeEventListener("canplay",cb,!1);R=b(".cj-vid-full");x=b(".cj-vid-play");r=b(".cj-vid-pause");S=b(".cj-vid-mute");T=b(".cj-vid-total");ja=b(".cj-vid-buffer");U=b(".cj-vid-normal");V=b(".cj-vid-volume");F=b(".cj-vid-scrub");W=b(".cj-vid-time");L=b(".cj-vid-progress");ka=b(".cj-vid-vol-total");p=b(".cj-vid-vol-current");la=b(".cj-vid-vol-buttons"); G=b(".cj-vid-vol-lines");ma=b(".cj-vid-fullscreen");na=b(".cj-vid-play-pause");oa=b("<span />").addClass("cj-time-bubble").text("00:00").appendTo(v);X=b("<span />").addClass("cj-vid-play-btn fa-icon-play").appendTo(v);pa=F.length&&L.length&&T.length&&ja.length;Y=G.length&&p.length&&ka.length;Z=na.length&&x.length&&r.length;qa=la.length&&V.length&&S.length;db=ma.length&&R.length&&U.length&&!H;ya=W.length;eb=oa.width();H&&(M-=35,b(".cj-vid-social").css("border-right",0));Z?($?(x.hide(),r.show()):(r.hide(), x.show()),na.on("click.cjvideo",E)):na.length?na.hide():(x.length&&x.hide(),r.length&&r.hide());qa?(Ja(w),la.on("click.cjvideo",Ka)):la.length?la.hide():(V.length&&V.hide(),S.length&&S.hide());Y?(N&&p.addClass("cj-vol-no-border").wrap(b("<span />").addClass("cj-vid-line cj-vid-vol-mask")),ra=parseInt(ka.css("width"),10),p.css("width",ra*w),G.on("mousedown.cjvideo",Ab).on("mouseup.cjvideo",fb)):(Y=!1,G.length?G.hide():(p.length&&p.hide(),ka.length&&ka.hide()));if(db)ma.on("click.cjvideo",La);else ma.length? ma.hide():(R.length&&R.hide(),U.length&&U.hide());pa?(F.css("width",n),T.css("width",n),I=b("<span />").addClass("cj-vid-hit").insertAfter(L).on("mouseenter.cjvideo",Bb).on("mousedown.cjvideo",Cb).on("mouseup.cjvideo",Ma)):F.length?F.hide():(L.length&&L.hide(),T.length&&T.hide());if(ya){var a=c.duration/60,y=60*(a-(a|0))|0,a=a|0;sa="/"+(10>a?"0"+a:a)+":"+(10>y?"0"+y:y);W.text("00:00"+sa)}if(q){q=b(q).appendTo(g);Na=q.outerHeight(!0)+10;Oa=q.outerWidth(!0)+10;z=b(".cj-context-play");s=b(".cj-context-full"); A=b(".cj-context-mute");aa=b(".cj-context-pause");J=b(".cj-context-normal");ba=b(".cj-context-unmute");a=b(".cj-context-copyright");y=d.attr("data-copyright");if(a.length&&y){var e=a.children("span");e.length&&(N&&(" cj-vid-light"===za&&-1===t.search("chrome"))&&e.addClass("cj-no-copy-border"),e.html(y));if(ta)a.on("click.cjvideo",gb)}z.length&&aa.length?($?z.addClass("cj-context-inactive"):aa.addClass("cj-context-inactive"),z.on("click.cjvideo",E),aa.on("click.cjvideo",E)):z=null;A.length&&ba.length? (1<c.volume?A.addClass("cj-context-inactive"):ba.addClass("cj-context-inactive"),A.on("click.cjvideo",Ka),ba.on("click.cjvideo",Ka)):A=null;s.length&&J.length&&!H?(s.on("click.cjvideo",La),J.on("click.cjvideo",La)):(s.length&&s.hide(),J.length&&J.hide(),J=s=null);q.addClass(N?"cj-ctx-inactive":"cj-context-transition");b(B).bind("contextmenu",Db);g.on("mouseleave",Pa)}a=b(".cj-vid-social");if(Qa)if(a.length)a.children("span").on("click.cjvideo",wb);else M-=74,H&&(b(".cj-divider-last").hide(),b(".cj-vid-vol-lines").css("border-right", 0));else M-=74,a.length&&a.hide(),H&&(b(".cj-divider-last").hide(),b(".cj-vid-vol-lines").css("border-right",0));c.addEventListener("ended",Eb,!1);l.on("click.cjvideo",E);X.on("click.cjvideo",E);hb()}function Db(a){a.preventDefault();a.stopPropagation();if(!(480>e)){var b=a.pageX;a=a.pageY;var c=f-ia-10,b=b+Oa>e-10?e-Oa-16:10>b?10:b;a=a+Na>c?f-Na-ia:10>a?10:a;N?q.stop().removeClass("cj-ctx-inactive").css("visibility","visible").animate({top:a,left:b,opacity:1},{duration:750,easing:"easeOutQuint", queue:!1}):q.css({left:b,top:a}).removeClass("cj-item-inactive");g.one("click.cjvideo",Pa)}}function Pa(){g.unbind("click.cjvideo",Pa);N?q.stop().addClass("cj-ctx-inactive").animate({opacity:0},{duration:750,easing:"easeOutQuint",complete:Fb,queue:!1}):q.addClass("cj-item-inactive")}function Fb(){q.css("visibility","hidden")}function hb(){if(l)ua(),b(parent).on("resize.cjvideo",ib),ya&&W.text("00:00"+sa),b("#cj-wrapper").remove(),v.css("opacity",1),Q(jb),c.volume=w,$&&(m&&m.hide(),ca=!0,c.play(), Q(va),X.addClass("cj-item-inactive"),g.on("mousemove.cjvideo",C).on("mouseleave.cjvideo",wa),Z&&r.show());else{var a="url="+u+"&vol="+w+"&domain="+parent.document.URL+"&auto="+($?"true":"false")+"&useShare="+(Qa?"true":"false"),y=d.attr("data-copyright");h&&(a+="&poster="+h);K&&(a+="&share="+K);y&&(a+="&copyright="+y);Ra=b('<object id="myflash" type="application/x-shockwave-flash" data="'+Sa+'" width="'+k.width()+'" height="'+k.height()+'"><param name="movie" value="'+Sa+'" /><param name="allowScriptAccess" value="always" /><param name="bgcolor" value="#000000" /><param name="allowfullscreen" value="true" /><param name="wmode" value="opaque" /><param name="flashvars" value="'+ a+'" /><a href="http://get.adobe.com/flashplayer/" target="_blank"><img src="img/get_flash.jpg" /></a></object>');l=b("<div />").prependTo(v).append(Ra)}}function Gb(){Aa||Ta("cj");clearTimeout(Ba);Ba=setTimeout(Ta,Ua)}function Ta(a){Va();if(Ca!==e||Da!==f)Ra.attr({width:e,height:f}),Ca=e,Da=f,Aa="cj"===a}function ib(){Aa||ua("cj");clearTimeout(Ba);Ba=setTimeout(ua,Ua)}function Va(){e=D?d.width():k.width();O&&P&&!Wa?(e=D?kb.width():k.width(),f=e/O*P|0,d.attr("height",f)):(D?(e=d.width(),f=d.height()): (e=k.width(),f=k.height()),e=D?d.width():k.width(),f=D?d.height():k.height())}function ua(a){Va();if(Ca!==e||Da!==f)n=480<e?e-M:e-181,pa&&(F.css("width",n),T.css("width",n),lb&&(ja.css("width",n),I.css("width",n)),ca&&!c.paused&&va()),l.width(e),l.height(f),Ca=e,Da=f,Aa="cj"===a,!ca&&m&&mb()}function mb(){m.attr({width:e,height:f}).css("top",(k.height()>>1)-(f>>1))}function C(){ha.css("opacity",1)}function wa(){ha.css("opacity",0)}function Eb(a){a.stopPropagation();clearTimeout(da);c.pause();ca=!1; c.currentTime=0;W.text("00:00"+sa);g.off("mousemove.cjvideo mouseleave.cjvideo");pa&&L.css("width",0);m&&(mb(),m.show());Z&&(r.hide(),x.show());ha.css("opacity",1);X.removeClass("cj-item-inactive")}function E(a){if(!(a&&b(this).hasClass("cj-context-inactive")||g.hasClass("cj-hide-mouse"))){if(c.paused)if(ca||(m&&m.hide(),ca=!0),c.play(),Z&&(x.hide(),r.show()),Q(va),X.addClass("cj-item-inactive"),z&&(z.addClass("cj-context-inactive"),aa.removeClass("cj-context-inactive")),xa)a&&(!c.paused&&a.pageY< f-ia)&&(da=setTimeout(nb,3E3));else g.on("mousemove.cjvideo",C).on("mouseleave.cjvideo",wa);else c.pause(),Z&&(r.hide(),x.show()),X.removeClass("cj-item-inactive"),xa?(clearTimeout(da),C(),g.removeClass("cj-hide-mouse")):(g.off("mousemove.cjvideo mouseleave.cjvideo"),C()),z&&(aa.addClass("cj-context-inactive"),z.removeClass("cj-context-inactive"));C()}}function Ja(a){a||(a=c.volume);0!==a?(Xa=!0,qa&&(S.hide(),V.show()),A&&(ba.addClass("cj-context-inactive"),A.removeClass("cj-context-inactive"))): (Xa=!1,Y&&p.css("width",0),qa&&(V.hide(),S.show()),A&&(A.addClass("cj-context-inactive"),ba.removeClass("cj-context-inactive")))}function ob(a){a=a.pageX-G.offset().left;var b=a/ra,b=0>b?0:1<b?1:b;a>ra-3&&(a=ra,b=1);p.css("width",a);c.volume=b}function Ab(a){ob(a);G.on("mousemove.cjvideo",ob).on("mouseleave.cjvideo",fb)}function fb(){G.off("mousemove.cjvideo mouseleave.cjvideo");qa&&Ja()}function Ka(a){a&&b(this).hasClass("cj-context-inactive")||(Xa?(Y&&(pb=parseInt(p.css("width"),10),p.css("width", 0)),Ia=c.volume,c.volume=0):(Y&&p.css("width",pb),c.volume=Ia),Ja())}function Ya(a){isNaN(ea)&&(ea=F.offset().left);c.currentTime=c.duration*((a.pageX-ea)/n);va()}function Cb(a){c.pause();Ya(a);I.on("mousemove.cjvideo",Ya).on("mouseleave.cjvideo",Ma)}function Ma(){I.off("mousemove.cjvideo",Ya).off("mouseleave.cjvideo",Ma);c.paused&&E()}function Bb(){I.on("mouseleave.cjvideo",Hb).on("mousemove.cjvideo",qb);oa.addClass("cj-time-bubble-active")}function Hb(){I.off("mouseleave.cjvideo").off("mousemove.cjvideo", qb);oa.removeClass("cj-time-bubble-active")}function qb(a){isNaN(ea)&&(ea=F.offset().left);a=a.pageX;var b=(a-ea)/n*c.duration/60,d=60*(b-(b|0))|0,b=b|0;oa.css("left",a-eb).text((10>b?"0"+b:b)+":"+(10>d?"0"+d:d))}function jb(){if(1>c.buffered.end(0)/c.duration){var a=n*(c.buffered.end(0)/c.duration);ja.css("width",a);I.css("width",a);Q(jb)}else lb=!0,ja.css("width",n),I.css("width",n)}function va(){var a=c.currentTime;pa&&L.css("width",n*(a/c.duration));if(ya){var a=a/60,b=60*(a-(a|0))|0,a=a|0;W.text((10> a?"0"+a:a)+":"+(10>b?"0"+b:b)+sa)}c.paused||Q(va)}function rb(a){clearTimeout(da);C();g.removeClass("cj-hide-mouse");!c.paused&&a.pageY<f-ia&&(da=setTimeout(nb,3E3))}function nb(){g.addClass("cj-hide-mouse");wa()}function La(a){if(!a||!b(this).hasClass("cj-context-inactive"))if(xa)B[Ea]();else sb=e,Wa=!0,B.addEventListener(fa,Za,!1),g[0][ga]()}function Za(){clearTimeout($a);B[Fa]?$a=setTimeout(Ib,100):(k.unbind("resize.cjvideo",Ga),B.removeEventListener(fa,Za,!1),tb())}function Ib(){R.hide();U.show(); g.off("mousemove.cjvideo mouseleave.cjvideo");C();s&&(s.addClass("cj-context-inactive"),J.removeClass("cj-context-inactive"));xa=!0;if(!N)g.off("mousemove.cjvideo",rb).on("mousemove.cjvideo",rb);k.unbind("resize.cjvideo",Ga).one("resize.cjvideo",Ga)}function Ga(){k.unbind("resize.cjvideo",Ga);B.removeEventListener(fa,Za,!1);clearTimeout($a);tb()}function tb(){clearTimeout(da);g.off("mousemove.cjvideo").removeClass("cj-hide-mouse");c.paused?C():(wa(),g.on("mousemove.cjvideo",C).on("mouseleave.cjvideo", wa));s&&(J.addClass("cj-context-inactive"),s.removeClass("cj-context-inactive"));R.show();U.hide();xa=Wa=!1;setTimeout(ub,100)}function ub(){k.width()!==sb?setTimeout(ub,100):ua()}function gb(){ta&&("_blank"!==vb?parent.window.location=ta:(l.is("video")&&!c.paused&&E(),window.open(ta)))}var w=75,M=358,yb='<div class="cj-vid-element cj-vid-play-pause"><span class="cj-vid-icon cj-vid-play fa-icon-play"></span><span class="cj-vid-icon cj-vid-pause fa-icon-pause"></span></div><div class="cj-vid-element cj-vid-time">00:00/00:00</div><div class="cj-divider-left"></div><div class="cj-vid-element cj-vid-scrub"><span class="cj-vid-line cj-vid-total"></span><span class="cj-vid-line cj-vid-buffer"></span><span class="cj-vid-line cj-vid-progress"></span></div><div class="cj-divider-right"></div><div class="cj-vid-element cj-vid-vol-buttons"><span class="cj-vid-icon cj-vid-volume fa-icon-volume-up"></span><span class="cj-vid-icon cj-vid-mute fa-icon-volume-off"></span></div><div class="cj-vid-element cj-vid-vol-lines"><span class="cj-vid-line cj-vid-vol-total"></span><span class="cj-vid-line cj-vid-vol-current"></span></div><div class="cj-divider-right cj-divider-last"></div><div class="cj-vid-element cj-vid-social"><span class="cj-vid-twitter fa-icon-twitter"></span><span class="cj-vid-facebook fa-icon-facebook"></span><span class="cj-vid-google fa-icon-google-plus"></span></div><div class="cj-vid-element cj-vid-fullscreen"><span class="cj-vid-icon cj-vid-full fa-icon-resize-full"></span><span class="cj-vid-icon cj-vid-normal fa-icon-resize-small"></span></div>', q='<div class="cj-context-menu cj-item-inactive"><ul><li class="cj-context-play"><span>Play</span></li><li class="cj-context-pause"><span>Pause</span></li><li class="cj-context-mute"><span>Mute</span></li><li class="cj-context-unmute"><span>Unmute</span></li><li class="cj-context-full"><span>Fullscreen</span></li><li class="cj-context-normal cj-context-inactive"><span>Normalscreen</span></li><li class="cj-context-copyright"><span>&copy; Video Productions</span></li></ul></div>',vb,ta,ba,J,Z,aa,Y, ca,ga,eb,z,A,s,Ea,W,fa,Fa,v,sa,qa,na,pb,Ia,ya,f,$a,Sa,ha,F,L,G,ma,ka,ra,e,pa,Ra,Oa,Na,ia,Aa,Qa,lb,Wa,ea,Xa,l,X,db,S,V,D,Q,P,m,O,I,ja,N,Ba,oa,da,n,g,T,p,la,U,xa,sb,H,Ca,Da,d,c,r,K,t,Ua,$,x,R,za,k,u,kb,h,ab,B;b.extend(b.easing,{easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c}});b.cjVideo={init:function(){Ta();b(parent).on("resize.cjvideo",Gb);try{(-1!==t.search("msie")?B.myflash:k[0].myflash).videoResized()}catch(a){}b("#cj-wrapper").remove()},copyright:function(){gb()}};b(document).ready(function(){B= document;d=b(window.frameElement);if(d.length&&(O=d.attr("data-width")||d.attr("width")||640,P=d.attr("data-height")||d.attr("height")||360,-1!==O.toString().search("%")&&(O=640),-1!==P.toString().search("%")&&(P=360),O=parseInt(O,10),P=parseInt(P,10),kb=d.parent(),k=b(window),Va(),u=d.attr("data-video")||"")){h=d.attr("data-poster")||"";K=d.attr("data-share-text")||"";$="yes"===d.attr("data-auto-play");ta=d.attr("data-copyright-link");vb=d.attr("data-copyright-target");Qa="yes"===d.attr("data-use-share-buttons"); K&&(K+=" ");ab=-1!==document.URL.search("https");t=navigator.userAgent.toLowerCase();H=(N=-1!==t.search("webkit"))&&-1===t.search("chrome");var a=-1!==t.search("firefox"),e=-1!==t.search("android"),f;H&&(f=t.indexOf("version")+8,H=6>parseInt(t.substr(f,f+4),10));Ua=e?250:100;za="light"===d.attr("data-skin")?" cj-vid-light":" cj-vid-dark";g=b("body").addClass("cj-vid-container"+za);w*=0.01;c=B.createElement("video");D="onorientationchange"in window||e&&a;v=b("<div />").appendTo(g);ab?(-1===u.search("https")&& (u=u.split("http").join("https")),h&&-1===h.search("https")&&(h=h.split("http").join("https"))):(u=u.split("https").join("http"),h&&(h=h.split("https").join("http")));c.requestFullscreen?(ga="requestFullscreen",Ea="exitFullscreen",fa="fullscreenchange",Fa="fullscreenElement"):c.webkitRequestFullScreen?(ga="webkitRequestFullscreen",Ea="webkitExitFullscreen",fa="webkitfullscreenchange",Fa="webkitIsFullScreen"):c.mozRequestFullScreen&&(ga="mozRequestFullScreen",Ea="mozCancelFullScreen",fa="mozfullscreenchange", Fa="mozFullScreen");!D&&(e=-1!==t.search("opera"),a&&"yes"===d.attr("data-firefox-uses-flash")||e)&&(ga=null);ga&&c.canPlayType&&!D?(c.volume=0,h?(m=b("<img />").addClass("cj-poster").one("error.cjvideo",zb).one("load.cjvideo",Ha).appendTo(v),m.attr("src",h)):Ha()):D?(bb(u),h&&!a&&l.attr("poster",h),$&&l.attr("autoplay","autoplay"),l.attr("controls","controls").prependTo(v),ua(),b(parent).on("orientationchange.cjvideo",ib),b("#cj-wrapper").remove()):((a=d.attr("data-plugin-url")||"")&&(ab?-1===a.search("https")&& (a=a.split("http").join("https")):a=a.split("https").join("http")),Sa=a+"chameleon/swf/video_fallback_"+za.split("-")[2]+".swf",hb())}})})(jQuery);function cjVideoPlayer(b){jQuery.cjVideo[b]()};